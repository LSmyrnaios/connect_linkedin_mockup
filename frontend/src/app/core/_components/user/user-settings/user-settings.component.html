<app-user-nav-bar [signedInUserId]="signedInUser.id"></app-user-nav-bar>

<div class="container margin-t">
  <h1 align="center">Edit your account information</h1>
  <hr>
  <div class="col-md personal-info" align="center">

    <form class="form-horizontal" [formGroup]="updateForm" (ngSubmit)=onSubmit()>

      <div class="form-group">
        <div class="text" align="left">
          <label class="col-lg-3 control-label">First name: {{user.firstname}}</label>
        </div>
        <div class="col-lg-8">
          <input class="form-control" formControlName="firstname" type="text" ngModel #text_val="text_val" text_val [ngClass]="{ 'is-invalid': submitted && form.firstname.errors }">
          <div *ngIf="submitted && form.firstname.errors" class="invalid-feedback">
            <div *ngIf="form.firstname.errors.required">First name is required.</div>
            <div *ngIf="form.firstname.errors.minLength || form.firstname.errors.maxLength">Text should be between {{minTextLength}} and {{maxTextLength}} characters.</div>
            <div *ngIf="form.firstname.errors.text_val">First name must contain letters only.</div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="text" align="left">
          <label class="col-lg-3 control-label">Last name: {{user.lastname}}</label>
        </div>
        <div class="col-lg-8">
          <input class="form-control" formControlName="lastname" type="text" ngModel #text_val="text_val" text_val [ngClass]="{ 'is-invalid': submitted && form.lastname.errors }">
          <div *ngIf="submitted && form.lastname.errors" class="invalid-feedback">
            <div *ngIf="form.lastname.errors.required">Last name is required.</div>
            <div *ngIf="form.lastname.errors.minLength || form.lastname.errors.maxLength">Text should be between {{minTextLength}} and {{maxTextLength}} characters.</div>
            <div *ngIf="form.lastname.errors.text_val">Last name must contain letters only.</div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="text" align="left">
          <label class="col-lg-3 control-label">Email: {{user.email}}</label>
        </div>
        <div class="col-lg-8">
          <input class="form-control" formControlName="email" type="email">
          <div *ngIf="submitted && form.email.errors" class="invalid-feedback">
            <div *ngIf="form.email.errors.required">Email is required.</div>
            <div *ngIf="form.email.errors.email">Email is invalid.</div>
            <div *ngIf="form.email.errors.maxLength">Email should not exceed the {{maxEmailLength}} characters.</div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="text" align="left">
          <label class="col-md-3 control-label">New password:</label>
        </div>
        <div class="col-md-8">
          <input class="form-control" formControlName="password" type="password" [ngClass]="{ 'is-invalid': submitted && form.password.errors }">
          <div *ngIf="submitted && form.password.errors" class="invalid-feedback">
            <div *ngIf="form.password.errors.required">Password is required.</div>
            <div *ngIf="form.password.errors.minLength || form.password.errors.maxLength">Password should be between {{minPasswordLength}} and {{maxPasswordLength}} characters.</div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="text" align="left">
          <label class="col-md-3 control-label">Confirm new password:</label>
        </div>
        <div class="col-md-8">
          <input class="form-control" formControlName="confirmNewPassword" type="password" ngModel #compare_pass_fail="compare_pass_fail" compare_pass_fail [ngClass]="{ 'is-invalid': submitted && form.confirmNewPassword.errors }">
          <div *ngIf="submitted && form.confirmNewPassword.errors && (form.confirmNewPassword.dirty || form.confirmNewPassword.touched)" class="invalid-feedback">
            <div *ngIf="form.confirmNewPassword.errors.compare_pass_fail">Passwords do not match!</div>
          </div>
        </div>
      </div>

      <div class="col-md-8">
        <div class="button-group">
          <button class="btn btn-primary" type="submit">Submit changes</button>
          <button class="btn btn-warning" type="reset">Discard changes</button>
        </div>
      </div>
    </form>

  </div>

</div>
